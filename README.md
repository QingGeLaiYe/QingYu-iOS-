# 轻语 QingYu iOS App

## 项目简介

"轻语"是一款专注于"碎片时间疗愈"的iOS端国风音频应用，以国风乐器+自然白噪音的短音频为核心内容，通过极简操作与多语言适配，满足iPhone用户通勤、办公间隙、睡前等场景的快速放松需求，打造差异化东方疗愈体验。

## 核心特色

### 🎵 黑胶唱片质感交互
- **拟物化设计**: 模拟真实黑胶唱片的操作体验
- **实体触感**: 切换曲目时的唱针落下/抬起效果
- **物理反馈**: 丰富的触觉反馈和音效配合
- **视觉享受**: 旋转动画和光泽效果

### 🎸 国风音频内容
- **传统乐器**: 古琴、竹笛、古筝等传统乐器演奏
- **自然声音**: 溪流、鸟鸣、雨声等自然白噪音
- **短音频**: 10-40秒完美循环，适配碎片时间
- **场景分类**: 禅意静心、日常解压、睡前助眠、缓解焦虑

### 🌍 多语言全球化
- **支持语言**: 中文、英文、德文、法文
- **智能匹配**: 自动检测系统语言
- **完整本地化**: 界面文本、曲目名称、功能提示全适配
- **出海优化**: 符合各地区隐私法规要求

### 📱 极简无门槛体验
- **无注册登录**: 即开即用，降低用户尝试成本
- **操作简洁**: 全流程不超过3步完成
- **免费使用**: 所有内容免费开放
- **离线缓存**: 支持音频离线下载和播放

## 技术架构

### 系统要求
- **最低版本**: iOS 14.0+
- **支持设备**: iPhone 11至iPhone 15系列
- **开发语言**: Swift
- **开发框架**: UIKit + AVFoundation

### 核心模块

#### 1. 音频播放模块 (AudioPlayerManager)
- **无缝循环**: 10-40秒音频完美循环播放
- **多模式支持**: 单曲循环、顺序播放、随机播放
- **后台播放**: 支持iOS后台音频播放和锁屏控制
- **远程控制**: 支持AirPods、CarPlay等远程控制

#### 2. 黑胶唱片交互 (VinylRecordView)
- **3D视觉效果**: 黑胶唱片旋转动画和光泽效果
- **手势交互**: 点击、滑动、拖动等多种交互方式
- **触觉反馈**: 丰富的触觉反馈增强用户体验
- **动画过渡**: 流畅的切换和状态转换动画

#### 3. 场景分类系统 (HomeViewController)
- **横向滑动**: 场景标签横向滑动切换
- **智能搜索**: 支持按曲目名称和场景搜索
- **收藏功能**: 一键收藏喜欢的曲目
- **缓存管理**: 可视化的缓存状态和管理

#### 4. 个人中心 (ProfileViewController)
- **我的收藏**: 集中管理和播放收藏曲目
- **设置管理**: 后台播放、锁屏控制等设置
- **缓存管理**: 查看缓存大小，支持批量清理
- **多语言切换**: 支持4种语言即时切换

## 项目结构

```
QingYu-iOS/
├── App/
│   ├── AppDelegate.swift          # 应用程序委托
│   └── SceneDelegate.swift        # 场景委托
├── Views/
│   ├── HomeViewController.swift   # 主页控制器
│   ├── PlayerViewController.swift  # 播放器控制器
│   ├── ProfileViewController.swift # 个人中心控制器
│   └── VinylRecordView.swift      # 黑胶唱片视图
├── Managers/
│   └── AudioPlayerManager.swift   # 音频播放管理器
├── Resources/
│   ├── zh-Hans.lproj/            # 中文本地化
│   ├── en.lproj/                 # 英文本地化
│   ├── de.lproj/                 # 德文本地化
│   └── fr.lproj/                 # 法文本地化
└── QingYu.xcodeproj/            # Xcode项目文件
```

## 特色功能详解

### 🎧 黑胶唱片交互体验

#### 视觉设计
- **唱片纹理**: 模拟真实黑胶唱片的同心圆纹理
- **中心标签**: 红色中心标签，经典黑胶唱片设计
- **唱针动画**: 播放时唱针落下，暂停时抬起
- **光泽效果**: 动态光泽模拟真实唱片反光

#### 交互体验
- **点击播放**: 轻点唱片播放/暂停
- **滑动切换**: 左右滑动切换上一首/下一首
- **拖动进度**: 在唱片上拖动调节播放进度
- **触觉反馈**: 每个操作都有相应的触觉反馈

#### 动画效果
- **旋转动画**: 播放时唱片缓慢旋转（33⅓ RPM）
- **切换动画**: 切换唱片时的优雅过渡动画
- **闪光效果**: 唱片表面的动态闪光效果

### 🎵 音频播放系统

#### 核心功能
- **无缝循环**: 智能音频拼接，实现完美的循环播放
- **实时进度**: 精确的进度显示和拖动控制
- **音量控制**: 系统音量和应用内音量控制
- **播放模式**: 单曲循环、顺序播放、随机播放

#### 高级功能
- **音频焦点**: 智能处理音频中断和恢复
- **路由变化**: 自动处理拔插耳机等音频路由变化
- **后台播放**: 完整支持iOS后台音频播放
- **锁屏控制**: 系统锁屏媒体控制集成

### 🌐 多语言支持

#### 支持语言
- **中文 (zh-Hans)**: 简体中文，主要目标用户
- **英文 (en)**: 英语，国际化基础语言
- **德文 (de)**: 德语，欧洲市场
- **法文 (fr)**: 法语，欧洲市场

#### 本地化内容
- **界面文本**: 所有按钮、标签、提示信息
- **曲目名称**: 音频标题和艺术家信息
- **场景分类**: 四大场景的多语言描述
- **错误信息**: 用户友好的错误提示

### 🔧 无感知登录

#### 技术实现
- **匿名标识**: 使用SKPaymentQueue框架获取App Store Connect用户ID
- **数据同步**: 基于Apple ID的用户偏好数据同步
- **隐私保护**: 仅存储匿名标识和偏好数据
- **合规设计**: 符合各地区隐私法规要求

#### 用户体验
- **自动识别**: 启动时自动获取用户标识
- **无感同步**: 跨设备自动同步收藏和设置
- **隐私透明**: 清晰的隐私政策和数据使用说明

## 开发环境配置

### 系统要求
- **macOS**: Monterey (12.0) 或更高版本
- **Xcode**: 14.0 或更高版本
- **iOS**: 14.0 或更高版本
- **Swift**: 5.7 或更高版本

### 开发工具
- **IDE**: Xcode 14.0+
- **版本控制**: Git
- **依赖管理**: Swift Package Manager
- **调试工具**: Xcode Instruments

### 第三方库
本项目主要使用系统框架，减少外部依赖：
- **AVFoundation**: 音频播放和处理
- **MediaPlayer**: 媒体控制和远程控制
- **StoreKit**: App Store集成
- **CoreData**: 数据持久化（可选）

## 构建和运行

### 1. 克隆项目
```bash
git clone https://github.com/your-repo/QingYu-iOS.git
cd QingYu-iOS
```

### 2. 打开项目
```bash
open QingYu.xcodeproj
```

### 3. 配置项目
1. 在Xcode中配置开发者账号
2. 设置Bundle Identifier
3. 配置App Store Connect（如需要）

### 4. 运行项目
1. 选择目标设备或模拟器
2. 点击运行按钮或使用快捷键 `Cmd+R`

### 5. 调试测试
1. 使用Xcode调试工具进行调试
2. 在真机上测试触觉反馈和音频功能
3. 测试多语言切换功能

## 测试计划

### 功能测试
- [ ] 音频播放和暂停
- [ ] 黑胶唱片交互体验
- [ ] 场景切换和搜索
- [ ] 收藏和缓存功能
- [ ] 多语言切换
- [ ] 后台播放和锁屏控制

### 性能测试
- [ ] 启动时间（≤3秒）
- [ ] 音频加载时间（≤2秒）
- [ ] 内存使用情况
- [ ] 电池消耗测试
- [ ] 网络流量优化

### 兼容性测试
- [ ] 不同iPhone机型适配
- [ ] 不同iOS版本兼容性
- [ ] 不同屏幕尺寸适配
- [ ] 无障碍功能测试

### 国际化测试
- [ ] 中文显示和布局
- [ ] 英文显示和布局
- [ ] 德文显示和布局
- [ ] 法文显示和布局

## 部署和发布

### App Store准备
1. **应用图标**: 设计符合Apple规范的应用图标
2. **截图准备**: 各尺寸设备的应用截图
3. **应用描述**: 多语言的应用描述和关键词
4. **隐私政策**: 符合各地区要求的隐私政策

### 审核要点
1. **音频权限**: 正确声明音频播放权限
2. **隐私合规**: 符合App Store隐私审核要求
3. **功能完整性**: 确保所有核心功能正常工作
4. **用户体验**: 符合Apple人机界面指南

## 后续迭代计划

### V1.1 功能增强
- [ ] 播放列表功能
- [ ] 自定义场景创建
- [ ] 音质选择（标准/高清）
- [ ] 更多音频内容

### V1.2 体验优化
- [ ] 3D Touch支持
- [ ] Apple Watch应用
- [ ] CarPlay支持
- [ ] Siri快捷指令

### V1.3 内容扩展
- [ ] 用户生成内容
- [ ] 社交分享功能
- [ ] 专家冥想引导
- [ ] 个性化推荐

## 贡献指南

### 代码规范
1. **Swift风格**: 遵循Swift官方代码风格指南
2. **命名规范**: 使用清晰、描述性的变量和函数名
3. **注释规范**: 重要代码添加必要注释
4. **错误处理**: 完善的错误处理和用户提示

### 提交规范
1. **分支管理**: 使用Git Flow工作流
2. **提交信息**: 使用规范的提交信息格式
3. **代码审查**: 所有代码必须经过代码审查
4. **测试覆盖**: 新功能必须包含相应测试

### 文档维护
1. **代码文档**: 保持代码文档的及时更新
2. **API文档**: 完善的API接口文档
3. **用户文档**: 清晰的用户使用指南
4. **更新日志**: 详细的版本更新记录

## 联系方式

- **项目主页**: https://github.com/your-repo/QingYu-iOS
- **问题反馈**: https://github.com/your-repo/QingYu-iOS/issues
- **邮箱**: contact@qingyu.app
- **官网**: https://qingyu.app

## 许可证

本项目采用MIT许可证，详见 [LICENSE](LICENSE) 文件。

---

**轻语团队** © 2025 版权所有